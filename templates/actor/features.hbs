{{! Features Tab }}
<section
  class='tab features {{tab.cssClass}}'
  data-group='primary'
  data-tab='features'
>
  <section class='main' style='padding: 10px;'>
    {{! Grid principal com duas colunas para Character Details e Features List }}
    <div style='display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;'>
      {{! Character Details Container - Coluna esquerda }}
      <div class='character-details-container' style='display: flex; flex-direction: column; gap: 6px;'>
        <h3 style='margin: 0 0 10px 0; font-size: 16px; font-weight: bold; border-bottom: 1px solid #ccc; padding-bottom: 5px;'>Character Details</h3>
        
        {{! Nome }}
        <div style='display: flex; align-items: center; gap: 8px; padding: 2px 4px;'>
          <label style='font-weight: bold; cursor: default; margin: 0; padding: 0; text-align: left; min-width: 80px; font-size: 14px;'>{{localize "CARDIGAN.Actor.base.FIELDS.details.name.label"}}:</label>
          <input
            type='text'
            name='system.details.name'
            value='{{system.details.name}}'
            style='flex: 1; padding: 2px; text-align: left; border: 1px solid #ccc; font-size: 14px;'
          />
        </div>
        
        {{! Idade }}
        <div style='display: flex; align-items: center; gap: 8px; padding: 2px 4px;'>
          <label style='font-weight: bold; cursor: default; margin: 0; padding: 0; text-align: left; min-width: 80px; font-size: 14px;'>{{localize "CARDIGAN.Actor.base.FIELDS.details.age.label"}}:</label>
          <input
            type='number'
            name='system.details.age'
            value='{{system.details.age}}'
            data-dtype='Number'
            min='0'
            style='flex: 1; padding: 2px; text-align: center; border: 1px solid #ccc; font-size: 14px;'
          />
        </div>
        
        {{! Raça }}
        <div style='display: flex; align-items: center; gap: 8px; padding: 2px 4px;'>
          <label style='font-weight: bold; cursor: default; margin: 0; padding: 0; text-align: left; min-width: 80px; font-size: 14px;'>{{localize "CARDIGAN.Actor.base.FIELDS.details.race.label"}}:</label>
          <input
            type='text'
            name='system.details.race'
            value='{{system.details.race}}'
            style='flex: 1; padding: 2px; text-align: left; border: 1px solid #ccc; font-size: 14px;'
          />
        </div>
        
        {{! Deslocamento }}
        <div style='display: flex; align-items: center; gap: 8px; padding: 2px 4px;'>
          <label style='font-weight: bold; cursor: default; margin: 0; padding: 0; text-align: left; min-width: 80px; font-size: 14px;'>{{localize "CARDIGAN.Actor.base.FIELDS.details.movement.label"}}:</label>
          <input
            type='number'
            name='system.details.movement'
            value='{{system.details.movement}}'
            data-dtype='Number'
            min='0'
            style='flex: 1; padding: 2px; text-align: center; border: 1px solid #ccc; font-size: 14px;'
          />
        </div>
        
        {{! Acerto Crítico }}
        <div style='display: flex; align-items: center; gap: 8px; padding: 2px 4px;'>
          <label style='font-weight: bold; cursor: default; margin: 0; padding: 0; text-align: left; min-width: 80px; font-size: 14px;'>{{localize "CARDIGAN.Actor.base.FIELDS.details.criticalHit.label"}}:</label>
          <input
            type='number'
            name='system.details.criticalHit'
            value='{{system.details.criticalHit}}'
            data-dtype='Number'
            min='0'
            style='flex: 1; padding: 2px; text-align: center; border: 1px solid #ccc; font-size: 14px;'
          />
        </div>
      </div>

      {{! Features List - Coluna direita }}
      <div class='features-container'>
        <ol class='items-list'>
          <li class='item flexrow items-header'>
            <div class='item-name'>{{localize 'Name'}}</div>
            <div class='item-controls'>
              {{#if @root.editable}}
                <a
                  class='item-control item-create'
                  title='Create item'
                  data-action='createDoc'
                  data-document-class='Item'
                  data-type='feature'
                >
                  <i class='fas fa-plus'></i>
                  {{localize 'DOCUMENT.New' type='feature'}}
                </a>
              {{/if}}
            </div>
          </li>
          {{#each features as |item id|}}
            <li
              class='item flexrow'
              data-item-id='{{item._id}}'
              data-drag='true'
              data-document-class='Item'
            >
              <div class='item-name'>
                <div class='item-image'>
                  <a class='rollable' data-roll-type='item' data-action='roll'>
                    <img
                      src='{{item.img}}'
                      title='{{item.name}}'
                      width='24'
                      height='24'
                    />
                  </a>
                </div>
                <div>{{item.name}}</div>
              </div>
              <div class='item-controls'>
                <a
                  class='item-control item-edit'
                  title='{{localize "DOCUMENT.Update" type='feature'}}'
                  data-action='viewDoc'
                >
                  <i class='fas fa-edit'></i>
                </a>
                {{#if @root.editable}}
                  <a
                    class='item-control item-delete'
                    title='{{localize "DOCUMENT.Delete" type='feature'}}'
                    data-action='deleteDoc'
                  >
                    <i class='fas fa-trash'></i>
                  </a>
                {{/if}}
              </div>
            </li>
          {{/each}}
        </ol>
      </div>
    </div>

    {{! Abilities Container - Embaixo, ocupando toda a largura }}
    <div class='abilities-main-container'>
      <h3 style='margin: 0 0 10px 0; font-size: 16px; font-weight: bold; border-bottom: 1px solid #ccc; padding-bottom: 5px;'>Abilities</h3>
      <div class='abilities-list' style='display: flex; flex-direction: column; gap: 6px;'>
        {{#each system.abilities as |ability key|}}
          <div class='ability-row' style='display: flex; align-items: center; gap: 8px; padding: 2px 4px;'>
            <label
              class='rollable'
              data-action='roll'
              data-roll='1d20+{{ability.value}}'
              data-label='{{localize (lookup @root.config.abilities key)}}'
              data-key='{{key}}'
              style='font-weight: bold; cursor: pointer; margin: 0; padding: 0; text-align: left; min-width: 85px; font-size: 14px;'
            >{{localize (lookup @root.config.abilities key)}}</label>
            <input
              type='text'
              name='system.abilities.{{key}}.value'
              value='{{ability.value}}'
              data-dtype='Number'
              style='width: 50px; text-align: center; border: 1px solid #ccc; padding: 2px; font-size: 14px;'
            />
          </div>
        {{/each}}
      </div>
    </div>
  </section>
</section>